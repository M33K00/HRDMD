
  <%- include('./layouts/header') -%>
<body class="startbody">
  <div class="start-container fade-in">
    <%- include('./layouts/navhrisP') -%>
    <div class="row slide-up">
      <% if (user.department === "HR Department") { %>
        <%- include('./layouts/startpage/HRButtons.ejs') -%>
      <% } else { %>
        <%- include('./layouts/startpage/Buttons.ejs') -%>
      <% } %>
    </div>
  </div>
</body>
<% if (user.hrrole !== "ADMIN" && user.suffix === "" || user.middleName === "") { %>
  <%- include('./layouts/modals/unfinishedProfile') -%>
<% } %>
<!-- Sidebar -->
<div class="sidebar" id="sidebar">
  <div class="sidebar-body">
    <div class="sidebar-image">
      <div class="profile-image">
        <% if (user.image === "") { %>
          <img class="nav-img" src="../images/user.jpg" />
          <% } else { %>
          <img class="nav-img" src="../<%= user.image %>" />
        <% } %>
      </div>
      <div class="user-details">
        <a><%= user.name %></a>
        <a class="user-role"
          ><% if (user.hrrole === "ROLE 1") { %> Administrative Officer <% }
          else if (user.hrrole === "ROLE 2") { %> Senior Admin Assistant <% }
          else if (user.hrrole === "ROLE 3") { %> Admin Officer <% } else if
          (user.hrrole === "ROLE 4") { %> Admin Assistant <% } else if
          (user.hrrole === "ROLE 5") { %> Admin Aide <% } else if (user.hrrole
          === "ADMIN") { %> Department Head <% } %></a
        >
      </div>
    </div>
    <div class="sidebar-menu">
      <div class="sidebar-buttons">
        <ul>
          <li>
            <% if (user.hrrole === "ADMIN") { %>
            <a href="/view/<%= user._id %>"
              ><i class="fa-solid fa-gear"></i>Account Settings</a
            >
            <% } else { %>
            <a href="/editacc/<%= encodeURIComponent(user.name) %>"
              ><i class="fa-solid fa-gear"></i>Account Settings</a
            >
            <% } %>
          </li>
          <% if (user.mEmp === true || user.mLeave === true || user.mDTR === true || user.hrrole === "ADMIN") { %>
          <li>
            <a href="/hris_user/<%= user.email %>"><i class="fa-solid fa-fingerprint"></i>HRIS Personal</a>
          </li>
          <% } %>
          <li class="logout-button">
            <a href="/logout"
              ><i class="fa-solid fa-arrow-right-from-bracket"></i>Log Out</a
            >
          </li>
        </ul>
      </div>
    </div>
  </div>
</div>
<div class="app-version">
        <p>Version: 2.0.0 BETA (Build 24195)</p>
        <p> Environment: Production </p>
        <p>&copy; 2024 CVSU Bacoor. All rights reserved.</p>
        <p>Contact: <a href="mailto:marklawrenzuy@outlook.ph">marklawrenzuy@outlook.ph</a></p>
</div>
<div class="overlay" id="overlay"></div>
<% if (userAttendance.status === "OUT") { %>
<div class="modal" id="timeCheck" tabindex="-1">
  <div class="modal-dialog modal-dialog-centered modal-lg fade-in" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" style="font-weight: 800;">TIME-IN</h5>
      </div>
      <div class="modal-body">
        <p>You haven't timed-in yet. It is recommended to <strong>TIME-IN FIRST</strong> before doing anything else to avoid unrecorded time.</p>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-primary" id="timeIn">Time-in now</button>
      </div>
    </div>
  </div>
</div>
<% } %>
<script src="https://kit.fontawesome.com/64cf43ccc2.js"></script>
<script>
  document.addEventListener("DOMContentLoaded", function () {
    const toggleSidebar = document.getElementById("toggleSidebar");
    const sidebar = document.getElementById("sidebar");
    const overlay = document.getElementById("overlay");

    toggleSidebar.addEventListener("click", function (e) {
      e.preventDefault();
      sidebar.classList.toggle("active");
      overlay.classList.toggle("active");
    });

    overlay.addEventListener("click", function () {
      sidebar.classList.remove("active");
      overlay.classList.remove("active");
    });
  });
</script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
<script>
  // This will trigger the modal as soon as the page finishes loading
  document.addEventListener('DOMContentLoaded', function () {
    var myModal = new bootstrap.Modal(document.getElementById('timeCheck'), {
      backdrop: 'static',
      keyboard: false
    });
    myModal.show();
  });

document.addEventListener('DOMContentLoaded', function () {
  document.getElementById('timeIn').addEventListener('click', function () {
    window.location.href = '/dtr_user/<%= user._id %>';
  });
})
</script>